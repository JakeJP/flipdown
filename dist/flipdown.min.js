var __extends=this&&this.__extends||function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),FlipDown=function(){function t(e,o,n,i){if(void 0===o&&(o="flipdown"),this.version=t.version,this.initialised=!1,this.children=[],this.opts={theme:"dark",headings:t.headings,headingsAt:"top",digits:"auto",direction:"down",stopAtEnd:!0,delimiters:["&nbsp;",":",":",""],tick:null,ended:null},"number"!=typeof e&&!(e instanceof Date))throw new Error("FlipDown: Constructor expected unix timestamp, got ".concat(typeof e," instead."));"object"==typeof o&&(n=o,o="flipdown"),this.now=this._getTime(),this.epoch=e instanceof Date?e.getTime()/1e3:e,this.countdownEnded=!1,this.hasEndedCallback=null,this.element=document.getElementById(o),this._parseOptions(n),this.setTheme(this.opts.theme)}return Object.defineProperty(t.prototype,"rotorGroups",{get:function(){return this.children.filter((function(e){return e instanceof t.RotorGroup}))},enumerable:!1,configurable:!0}),t.prototype.start=function(){return this.initialised||this._init(),this.countdown=setInterval(this._tick.bind(this),1e3),this.element.classList.remove("flipdown-stopped"),this},t.prototype.stop=function(){return this.countdown&&(clearInterval(this.countdown),this.countdown=null,this.element.classList.add("flipdown-stopped")),this},t.prototype.setTheme=function(e){this.opts.theme!=e&&this.element.classList.remove("".concat(t.themeprefix).concat(this.opts.theme)),this.element.classList.add("".concat(t.themeprefix).concat(e)),this.opts.theme=e},t.prototype.getTheme=function(){return this.opts.theme},t.prototype.ifEnded=function(t){var e=this;return this.hasEndedCallback=function(){t(),e.hasEndedCallback=null},this},t.prototype._getTime=function(){return(new Date).getTime()/1e3},t.prototype._hasCountdownEnded=function(){return this.epoch-this.now<0?(this.countdownEnded=!0,null!=this.hasEndedCallback&&(this.hasEndedCallback(),this.hasEndedCallback=null),this.opts.ended&&"function"==typeof this.opts.ended&&this.opts.ended.call(this,this.now),this.element.classList.add("flipdown-ended"),!0):(this.countdownEnded=!1,!1)},t.prototype._parseOptions=function(t){for(var e in this.opts)t.hasOwnProperty(e)&&(this.opts[e]=t[e])},t.prototype._init=function(){var e=this;this.initialised=!0;var o=Math.floor((this.epoch-this.now)/86400),n=this.opts.headingsAt&&this.opts.headings?this.opts.headingsAt:null,i=this.opts.headings||t.emptyHeadings,r=this.opts.delimiters||t.emptyDelimiters;this.children.push(new t.RotorGroup(o<100?2:o.toString().length,i[0],n)),this.children.push(new t.Delimiter(r[0],n));for(var s=0;s<3;s++)this.children.push(new t.RotorGroup(2,i[s+1],n)),this.children.push(new t.Delimiter(r[s+1],n));this._tick(),this._updateClockValues();var a="auto"==this.opts.digits;return this.rotorGroups.forEach((function(t){a&&(0==t.clockValue?(t.element.style.display="none",t.element.classList.add("hidden")):a=!1)})),this.children.forEach((function(t){return e.element.appendChild(t.element)})),this},t.prototype._tick=function(){this.now=this._getTime();var t,e=this.epoch-this.now<=0?this.opts.stopAtEnd?0:this.now-this.epoch:this.epoch-this.now,o=[86400,3600,60,1];this.rotorGroups.forEach((function(n,i){t=n.clockValue=Math.floor(e/o[i]),e-=t*o[i]})),this.opts.tick&&"function"==typeof this.opts.tick&&this.opts.tick.call(this,this.epoch-this.now,this.now),this._updateClockValues(),this._hasCountdownEnded()},t.prototype._updateClockValues=function(){this.rotorGroups.forEach((function(t){return t.updateClockValue()}))},t.version="0.3.4 j",t.headings=["Days","Hours","Minutes","Seconds"],t.themeprefix="flipdown__theme-",t.emptyDelimiters=[" "," "," "," "],t.emptyHeadings=[null,null,null,null],t}();!function(t){var e=function(){function t(){}return t.prototype.setText=function(t){this.rotorLeafFront.textContent=this.prevClockValue,this.rotorBottom.textContent=this.prevClockValue;var e=this;function o(){e.rotorTop.textContent!=t&&(e.rotorTop.textContent=t)}function n(){var o=e.rotorLeafRear;if(o.textContent!=t){o.textContent=t,o.parentElement.classList.add("flipped");var n=setInterval(function(){o.parentElement.classList.remove("flipped"),clearInterval(n)}.bind(this),500)}}this.prevClockValue?(setTimeout(o.bind(this),500),setTimeout(n.bind(this),500)):(o.call(this),n.call(this)),this.prevClockValue=t},t}();t.Rotor=e;var o=function(){function t(t,e){this.label=t;this.element=document.createElement("div");this.element.classList.add("rotor-group"),e&&this.element.classList.add(e),t&&(this.elementLabel=document.createElement("div"),this.elementLabel.classList.add("rotor-group-heading"),this.element.appendChild(this.elementLabel)),this.initElement()}return t.prototype.initElement=function(){this.element.classList.add("delimiter");var t=document.createElement("div");t.innerHTML=this.label,this.element.appendChild(t)},t}();t.Delimiter=o;var n=function(t){function o(e,o,n){var i=t.call(this,o,n)||this;i.rotors=[];for(var r=0;r<e;r++){var s=i._createRotor();i.rotors.push(s)}return i.rotors.forEach((function(t){return i.element.appendChild(t.element)})),i}return __extends(o,t),o.prototype.initElement=function(){this.elementLabel&&(this.elementLabel.innerHTML=this.label)},o.prototype._createRotor=function(t){void 0===t&&(t=0);var o=new e;return(o.element=document.createElement("div")).className="rotor",o.rotorLeaf=document.createElement("div"),o.rotorLeafRear=document.createElement("figure"),o.rotorLeafFront=document.createElement("figure"),o.rotorTop=document.createElement("div"),o.rotorBottom=document.createElement("div"),o.rotorLeaf.className="rotor-leaf",o.rotorLeafRear.className="rotor-leaf-rear",o.rotorLeafFront.className="rotor-leaf-front",o.rotorTop.className="rotor-top",o.rotorBottom.className="rotor-bottom",o.rotorLeafRear.textContent=t.toString(),o.rotorTop.textContent=t.toString(),o.rotorBottom.textContent=t.toString(),[o.rotorLeaf,o.rotorTop,o.rotorBottom].forEach((function(t){return o.element.appendChild(t)})),[o.rotorLeafRear,o.rotorLeafFront].forEach((function(t){return o.rotorLeaf.appendChild(t)})),o},o.prototype.updateClockValue=function(){var t=this.pad(this.clockValue,2),e=0;this.rotors.forEach((function(o){o.setText(t[e++])}))},o.prototype.pad=function(t,e){return(t=t.toString()).length<e?this.pad("0"+t,e):t},o}(o);t.RotorGroup=n}(FlipDown||(FlipDown={}));