var __extends=this&&this.__extends||function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),FlipDown=function(){function t(e,o,n){if(void 0===o&&(o="flipdown"),this.version=t.version,this.initialised=!1,this.children=[],this.opts={theme:"dark",headings:t.headings,headingsAt:"top",digits:"auto",rotor:null,direction:"down",stopAtEnd:!0,delimiters:["&nbsp;",":",":",""],tick:null,ended:null},"number"!=typeof e&&!(e instanceof Date))throw new Error("FlipDown: Constructor expected unix timestamp, got ".concat(typeof e," instead."));"object"==typeof o&&(n=o,o="flipdown"),this.now=this._getTime(),this.epoch=e instanceof Date?e.getTime()/1e3:e,this.countdownEnded=!1,this.hasEndedCallback=null,this.element=document.getElementById(o),this._parseOptions(n),this.setTheme(this.opts.theme),this._init()}return Object.defineProperty(t.prototype,"rotorGroups",{get:function(){return this.children.filter((function(e){return e instanceof t.RotorGroup}))},enumerable:!1,configurable:!0}),t.prototype.start=function(){return this.countdown=setInterval(this._tick.bind(this),1e3),this.element.classList.remove("flipdown-stopped"),this},t.prototype.stop=function(){return this.countdown&&(clearInterval(this.countdown),this.countdown=null,this.element.classList.add("flipdown-stopped")),this},t.prototype.setTheme=function(e){this.opts.theme!=e&&this.element.classList.remove("".concat(t.themeprefix).concat(this.opts.theme)),this.element.classList.add("".concat(t.themeprefix).concat(e)),this.opts.theme=e},t.prototype.getTheme=function(){return this.opts.theme},t.prototype.ifEnded=function(t){var e=this;return this.hasEndedCallback=function(){t(),e.hasEndedCallback=null},this},t.prototype._getTime=function(){return(new Date).getTime()/1e3},t.prototype._hasCountdownEnded=function(){return this.epoch-this.now<0?(this.countdownEnded=!0,null!=this.hasEndedCallback&&(this.hasEndedCallback(),this.hasEndedCallback=null),this.opts.ended&&"function"==typeof this.opts.ended&&this.opts.ended.call(this,this.now),this.element.classList.add("flipdown-ended"),!0):(this.countdownEnded=!1,!1)},t.prototype._parseOptions=function(t){for(var e in this.opts)t.hasOwnProperty(e)&&(this.opts[e]=t[e])},t.prototype._init=function(){var e=this;this.initialised=!0;var o=Math.floor((this.epoch-this.now)/86400),n=this.opts.headingsAt&&this.opts.headings?this.opts.headingsAt:null,i=this.opts.headings||t.emptyHeadings,r=this.opts.delimiters||t.emptyDelimiters;this.children.push(new t.RotorGroup(this.opts.rotor||(o<100?2:o.toString().length),i[0],n)),this.children.push(new t.Delimiter(r[0],n));for(var s=0;s<3;s++)this.children.push(new t.RotorGroup(this.opts.rotor||2,i[s+1],n)),this.children.push(new t.Delimiter(r[s+1],n));this._tick();var l="auto"==this.opts.digits;this.rotorGroups.forEach((function(t){l&&(0==t.clockValue?(t.element.style.display="none",t.element.classList.add("hidden")):l=!1)})),this.children.forEach((function(t){return e.element.appendChild(t.element)}))},t.prototype._tick=function(){this.now=this._getTime();var t,e=this.epoch-this.now<=0?this.opts.stopAtEnd?0:this.now-this.epoch:this.epoch-this.now,o=[86400,3600,60,1];this.rotorGroups.forEach((function(n,i){t=n.clockValue=Math.floor(e/o[i]),e-=t*o[i]})),this.opts.tick&&"function"==typeof this.opts.tick&&this.opts.tick.call(this,this.epoch-this.now,this.now),this.rotorGroups.forEach((function(t){return t.updateClockValue()})),this._hasCountdownEnded()},t.version="0.3.4 j",t.headings=["Days","Hours","Minutes","Seconds"],t.themeprefix="flipdown__theme-",t.emptyDelimiters=["","","",""],t.emptyHeadings=[null,null,null,null],t}();!function(t){var e=function(){function t(){var t=this,e=t.element=document.createElement("div");e.className="rotor",e.innerHTML="<div class='rotor-leaf'><div class='rotor-leaf-rear'><div class='digit'></div></div><div class='rotor-leaf-front'><div class='digit'></div></div></div><div class='rotor-top'><div class='digit'></div></div><div class='rotor-bottom'><div class='digit'></div></div>",t.rotorLeaf=e.querySelector("[class='rotor-leaf']"),t.rotorLeafRear=e.querySelector("[class='rotor-leaf-rear'] [class='digit']"),t.rotorLeafFront=e.querySelector("[class='rotor-leaf-front'] [class='digit']"),t.rotorTop=e.querySelector("[class='rotor-top'] [class='digit']"),t.rotorBottom=e.querySelector("[class='rotor-bottom'] [class='digit']"),t.rotorLeaf.addEventListener("transitionend",(function(e){return t.transitionend(e)}))}return t.prototype.setText=function(t){var e=this;e.prevClockValue&&t===e.prevClockValue||(e.rotorLeafFront.textContent=e.prevClockValue||t,e.rotorBottom.textContent=e.prevClockValue||t,e.rotorTop.textContent=t,e.rotorLeafRear.textContent=t,e.prevClockValue&&(e.rotorLeaf.classList.remove("flipped"),e.rotorLeaf.offsetWidth,e.rotorLeaf.classList.add("flipped")),this.prevClockValue=t)},t.prototype.transitionend=function(t){var e=this;e.rotorLeaf.classList.remove("flipped"),e.rotorLeafFront.textContent=e.rotorTop.textContent,e.rotorLeafRear.textContent=e.rotorTop.textContent,e.rotorBottom.textContent=e.rotorLeafRear.textContent},t}();t.Rotor=e;var o=function(){function t(t,e){this.label=t;this.element=document.createElement("div");this.element.classList.add("rotor-group"),e&&this.element.classList.add(e),this.initElement()}return t.prototype.initElement=function(){this.element.classList.add("delimiter");var t=document.createElement("div");t.innerHTML=this.label,this.element.appendChild(t)},t}();t.Delimiter=o;var n=function(t){function o(o,n,i){var r=t.call(this,n,i)||this;r.rotors=[];for(var s=0;s<o;s++){var l=new e;r.rotors.push(l)}return r.rotors.forEach((function(t){return r.element.appendChild(t.element)})),r}return __extends(o,t),o.prototype.initElement=function(){this.label&&(this.elementLabel=document.createElement("div"),this.elementLabel.classList.add("rotor-group-heading"),this.element.appendChild(this.elementLabel)),this.elementLabel&&(this.elementLabel.innerHTML=this.label)},o.prototype.updateClockValue=function(t){void 0===t&&(t=null),t=t||this.clockValue;var e,o=this.pad(t,2),n=this.rotors.length,i=0,r=0;for(n<o.length?(e=o.substring(0,o.length-n+1),r=o.length-n):e=o[0];r<o.length;e=o[++r])this.rotors[i++].setText(e)},o.prototype.pad=function(t,e){return(t=t.toString()).length<e?this.pad("0"+t,e):t},o}(o);t.RotorGroup=n}(FlipDown||(FlipDown={}));