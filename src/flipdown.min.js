var __extends=this&&this.__extends||function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),FlipDown=function(){function t(e,o,i,n){if(void 0===o&&(o="flipdown"),this.version=t.version,this.initialised=!1,this.children=[],this.opts={theme:"dark",headings:t.headings,headingsAt:"top",digits:"auto",rotor:null,direction:"down",stopAtEnd:!0,delimiters:["&nbsp;",":",":",""],tick:null,ended:null},"number"!=typeof e&&!(e instanceof Date))throw new Error("FlipDown: Constructor expected unix timestamp, got ".concat(typeof e," instead."));"object"==typeof o&&(i=o,o="flipdown"),this.now=this._getTime(),this.epoch=e instanceof Date?e.getTime()/1e3:e,this.countdownEnded=!1,this.hasEndedCallback=null,this.element=document.getElementById(o),this._parseOptions(i),this.setTheme(this.opts.theme)}return Object.defineProperty(t.prototype,"rotorGroups",{get:function(){return this.children.filter((function(e){return e instanceof t.RotorGroup}))},enumerable:!1,configurable:!0}),t.prototype.start=function(){return this.initialised||this._init(),this.countdown=setInterval(this._tick.bind(this),1e3),this.element.classList.remove("flipdown-stopped"),this},t.prototype.stop=function(){return this.countdown&&(clearInterval(this.countdown),this.countdown=null,this.element.classList.add("flipdown-stopped")),this},t.prototype.setTheme=function(e){this.opts.theme!=e&&this.element.classList.remove("".concat(t.themeprefix).concat(this.opts.theme)),this.element.classList.add("".concat(t.themeprefix).concat(e)),this.opts.theme=e},t.prototype.getTheme=function(){return this.opts.theme},t.prototype.ifEnded=function(t){var e=this;return this.hasEndedCallback=function(){t(),e.hasEndedCallback=null},this},t.prototype._getTime=function(){return(new Date).getTime()/1e3},t.prototype._hasCountdownEnded=function(){return this.epoch-this.now<0?(this.countdownEnded=!0,null!=this.hasEndedCallback&&(this.hasEndedCallback(),this.hasEndedCallback=null),this.opts.ended&&"function"==typeof this.opts.ended&&this.opts.ended.call(this,this.now),this.element.classList.add("flipdown-ended"),!0):(this.countdownEnded=!1,!1)},t.prototype._parseOptions=function(t){for(var e in this.opts)t.hasOwnProperty(e)&&(this.opts[e]=t[e])},t.prototype._init=function(){var e=this;this.initialised=!0;var o=Math.floor((this.epoch-this.now)/86400),i=this.opts.headingsAt&&this.opts.headings?this.opts.headingsAt:null,n=this.opts.headings||t.emptyHeadings,s=this.opts.delimiters||t.emptyDelimiters;this.children.push(new t.RotorGroup(this.opts.rotor||(o<100?2:o.toString().length),n[0],i)),this.children.push(new t.Delimiter(s[0],i));for(var r=0;r<3;r++)this.children.push(new t.RotorGroup(this.opts.rotor||2,n[r+1],i)),this.children.push(new t.Delimiter(s[r+1],i));this._tick(),this._updateClockValues();var l="auto"==this.opts.digits;return this.rotorGroups.forEach((function(t){l&&(0==t.clockValue?(t.element.style.display="none",t.element.classList.add("hidden")):l=!1)})),this.children.forEach((function(t){return e.element.appendChild(t.element)})),this},t.prototype._tick=function(){this.now=this._getTime();var t,e=this.epoch-this.now<=0?this.opts.stopAtEnd?0:this.now-this.epoch:this.epoch-this.now,o=[86400,3600,60,1];this.rotorGroups.forEach((function(i,n){t=i.clockValue=Math.floor(e/o[n]),e-=t*o[n]})),this.opts.tick&&"function"==typeof this.opts.tick&&this.opts.tick.call(this,this.epoch-this.now,this.now),this._updateClockValues(),this._hasCountdownEnded()},t.prototype._updateClockValues=function(){this.rotorGroups.forEach((function(t){return t.updateClockValue()}))},t.version="0.3.4 j",t.headings=["Days","Hours","Minutes","Seconds"],t.themeprefix="flipdown__theme-",t.emptyDelimiters=["","","",""],t.emptyHeadings=[null,null,null,null],t}();!function(t){var e=function(){function t(t){var e=this,o=e.element=document.createElement("div");o.className="rotor",o.innerHTML="<div class='rotor-leaf'><div class='rotor-leaf-rear'><div class='digit'></div></div><div class='rotor-leaf-front'><div class='digit'></div></div></div><div class='rotor-top'><div class='digit'></div></div><div class='rotor-bottom'><div class='digit'></div></div>",e.rotorLeaf=o.querySelector("[class='rotor-leaf']"),e.rotorLeafRear=o.querySelector("[class='rotor-leaf-rear'] [class='digit']"),e.rotorLeafFront=o.querySelector("[class='rotor-leaf-front'] [class='digit']"),e.rotorTop=o.querySelector("[class='rotor-top'] [class='digit']"),e.rotorBottom=o.querySelector("[class='rotor-bottom'] [class='digit']");var i=t.toString();e.rotorLeafRear.textContent=i,e.rotorTop.textContent=i,e.rotorBottom.textContent=i}return t.prototype.setText=function(t){this.rotorLeafFront.textContent=this.prevClockValue,this.rotorBottom.textContent=this.prevClockValue;var e=this;function o(){e.rotorTop.textContent!=t&&(e.rotorTop.textContent=t)}function i(){var o=e.rotorLeafRear;if(o.textContent!=t){o.textContent=t,e.rotorLeaf.classList.add("flipped");var i=setInterval(function(){e.rotorLeaf.classList.remove("flipped"),clearInterval(i)}.bind(this),500)}}this.prevClockValue?(setTimeout(o.bind(this),500),setTimeout(i.bind(this),500)):(o.call(this),i.call(this)),this.prevClockValue=t},t}();t.Rotor=e;var o=function(){function t(t,e){this.label=t;this.element=document.createElement("div");this.element.classList.add("rotor-group"),e&&this.element.classList.add(e),this.initElement()}return t.prototype.initElement=function(){this.element.classList.add("delimiter");var t=document.createElement("div");t.innerHTML=this.label,this.element.appendChild(t)},t}();t.Delimiter=o;var i=function(t){function o(o,i,n){var s=t.call(this,i,n)||this;s.rotors=[];for(var r=0;r<o;r++){var l=new e(0);s.rotors.push(l)}return s.rotors.forEach((function(t){return s.element.appendChild(t.element)})),s}return __extends(o,t),o.prototype.initElement=function(){this.label&&(this.elementLabel=document.createElement("div"),this.elementLabel.classList.add("rotor-group-heading"),this.element.appendChild(this.elementLabel)),this.elementLabel&&(this.elementLabel.innerHTML=this.label)},o.prototype.updateClockValue=function(){var t,e=this.pad(this.clockValue,2),o=this.rotors.length,i=0,n=0;for(o<e.length?(t=e.substring(0,e.length-o+1),n=e.length-o):t=e[0];n<e.length;t=e[++n])this.rotors[i++].setText(t)},o.prototype.pad=function(t,e){return(t=t.toString()).length<e?this.pad("0"+t,e):t},o}(o);t.RotorGroup=i}(FlipDown||(FlipDown={}));